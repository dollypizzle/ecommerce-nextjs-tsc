{"ast":null,"code":"import Router from 'next/router';\nimport cookie from 'js-cookie';\nexport var authInitialProps = function authInitialProps(isProtectedRoute, path) {\n  return function (_ref) {\n    var res = _ref.res;\n    var isAuthenticated = checkIfAuthenticated();\n\n    if (isProtectedRoute && !isAuthenticated) {\n      return redirectUser(res, path);\n    }\n\n    return {\n      isAuthenticated: isAuthenticated\n    };\n  };\n};\nexport var checkIfAuthenticated = function checkIfAuthenticated() {\n  var auth = cookie.get('jwtToken');\n  return auth ? true : false;\n};\nexport var getUserFromCookie = function getUserFromCookie() {\n  var authUser = cookie.get('jwtToken');\n  return authUser ? JSON.parse(authUser) : null;\n};\n\nvar redirectUser = function redirectUser(res, path) {\n  if (res) {\n    res.redirect(302, path);\n  }\n\n  Router.replace(path);\n};","map":{"version":3,"sources":["/home/dolapo/ecommerce-nextjs-t/src/lib/auth.ts"],"names":["Router","cookie","authInitialProps","isProtectedRoute","path","res","isAuthenticated","checkIfAuthenticated","redirectUser","auth","get","getUserFromCookie","authUser","JSON","parse","redirect","replace"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,aAAnB;AAEA,OAAOC,MAAP,MAAmB,WAAnB;AAGA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,gBAAD,EAA4BC,IAA5B;AAAA,SAA6C,gBAEtD;AAAA,QADrBC,GACqB,QADrBA,GACqB;AACrB,QAAMC,eAAe,GAAGC,oBAAoB,EAA5C;;AAEA,QAAIJ,gBAAgB,IAAI,CAACG,eAAzB,EAA0C;AACxC,aAAOE,YAAY,CAACH,GAAD,EAAMD,IAAN,CAAnB;AACD;;AAED,WAAO;AAAEE,MAAAA,eAAe,EAAfA;AAAF,KAAP;AACD,GAV+B;AAAA,CAAzB;AAYP,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAe;AACjD,MAAME,IAAI,GAAGR,MAAM,CAACS,GAAP,CAAW,UAAX,CAAb;AAEA,SAAOD,IAAI,GAAG,IAAH,GAAU,KAArB;AACD,CAJM;AAMP,OAAO,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,GAAsB;AACrD,MAAMC,QAAQ,GAAGX,MAAM,CAACS,GAAP,CAAW,UAAX,CAAjB;AAEA,SAAOE,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWF,QAAX,CAAH,GAA0B,IAAzC;AACD,CAJM;;AAMP,IAAMJ,YAAY,GAAG,SAAfA,YAAe,CAACH,GAAD,EAAWD,IAAX,EAA4B;AAC/C,MAAIC,GAAJ,EAAS;AACPA,IAAAA,GAAG,CAACU,QAAJ,CAAa,GAAb,EAAkBX,IAAlB;AACD;;AACDJ,EAAAA,MAAM,CAACgB,OAAP,CAAeZ,IAAf;AACD,CALD","sourcesContent":["import Router from 'next/router';\nimport { NextPageContext } from 'next';\nimport cookie from 'js-cookie';\nimport { IntUser } from '../components/Products/Show';\n\nexport const authInitialProps = (isProtectedRoute: boolean, path: string) => ({\n  res,\n}: NextPageContext) => {\n  const isAuthenticated = checkIfAuthenticated();\n\n  if (isProtectedRoute && !isAuthenticated) {\n    return redirectUser(res, path);\n  }\n\n  return { isAuthenticated };\n};\n\nexport const checkIfAuthenticated = (): boolean => {\n  const auth = cookie.get('jwtToken');\n\n  return auth ? true : false;\n};\n\nexport const getUserFromCookie = (): IntUser | null => {\n  const authUser = cookie.get('jwtToken');\n\n  return authUser ? JSON.parse(authUser) : null;\n};\n\nconst redirectUser = (res: any, path: string) => {\n  if (res) {\n    res.redirect(302, path);\n  }\n  Router.replace(path);\n};\n"]},"metadata":{},"sourceType":"module"}